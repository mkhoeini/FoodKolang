!function(a,b){"use strict";b.module("ui.sortable",[]).value("uiSortableConfig",{}).directive("uiSortable",["uiSortableConfig","$timeout","$log",function(a,c,d){return{require:"?ngModel",link:function(e,f,g,h){function i(a,b){return b&&"function"==typeof b?function(c,d){a(c,d),b(c,d)}:a}var j,k={},l={receive:null,remove:null,start:null,stop:null,update:null};b.extend(k,a),h?(e.$watch(g.ngModel+".length",function(){c(function(){f.data("ui-sortable")&&f.sortable("refresh")})}),l.start=function(a,b){b.item.sortable={index:b.item.index(),cancel:function(){b.item.sortable._isCanceled=!0},isCanceled:function(){return b.item.sortable._isCanceled},_isCanceled:!1}},l.activate=function(){j=f.contents();var a=f.sortable("option","placeholder");if(a&&a.element&&"function"==typeof a.element){var c=a.element();c.jquery||(c=b.element(c));var d=f.find('[class="'+c.attr("class")+'"]');j=j.not(d)}},l.update=function(a,b){b.item.sortable.received||(b.item.sortable.dropindex=b.item.index(),b.item.sortable.droptarget=b.item.parent(),f.sortable("cancel")),"clone"===f.sortable("option","helper")&&(j=j.not(j.last())),j.appendTo(f),b.item.sortable.received&&!b.item.sortable.isCanceled()&&e.$apply(function(){h.$modelValue.splice(b.item.sortable.dropindex,0,b.item.sortable.moved)})},l.stop=function(a,b){!b.item.sortable.received&&"dropindex"in b.item.sortable&&!b.item.sortable.isCanceled()?e.$apply(function(){h.$modelValue.splice(b.item.sortable.dropindex,0,h.$modelValue.splice(b.item.sortable.index,1)[0])}):"dropindex"in b.item.sortable&&!b.item.sortable.isCanceled()||"clone"===f.sortable("option","helper")||j.appendTo(f)},l.receive=function(a,b){b.item.sortable.received=!0},l.remove=function(a,b){b.item.sortable.isCanceled()||e.$apply(function(){b.item.sortable.moved=h.$modelValue.splice(b.item.sortable.index,1)[0]})},e.$watch(g.uiSortable,function(a){b.forEach(a,function(a,b){l[b]&&("stop"===b&&(a=i(a,function(){e.$apply()})),a=i(l[b],a)),f.sortable("option",b,a)})},!0),b.forEach(l,function(a,b){k[b]=i(a,k[b])})):d.info("ui.sortable: ngModel not provided!",f),f.sortable(k)}}}])}(window,window.angular);